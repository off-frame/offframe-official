---
import OffFrameButton from "./OffFrameButton.astro";
---

<aside>
  <a href="/" class="logo">
    <span class="logo-main">OFF FRAME</span>
    <span class="logo-sub">素の、<br>その時間。</span>
  </a>

  <div class="bottom">
    <a href="/about" class="about-link">About</a>


    <hr />

    <div class="offframe-area">
      <p class="offframe-copy">枠を外し、<br>写真の外側に<br>広がる世界へ。</p>
      <p class="offframe-title">OFFフレームモード<br>無料開放中。</p>
      <OffFrameButton id="offframeBtn" />
    </div>

    <hr />
  


    <div class="sns-section">
      <span class="section-label">公式SNS</span>
      <div class="sns-links">
        <a href="#" class="sns-btn">X</a>
        <a href="#" class="sns-btn">TikTok</a>
      </div>
    </div>


    <div class="share-section">
      <span class="section-label">シェア</span>
      <div class="share-links">
        <button class="share-icon-btn" id="shareX" aria-label="Xでシェア">
          <!-- X (Twitter) logo -->
          <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-4.714-6.231-5.401 6.231H2.744l7.73-8.835L1.254 2.25H8.08l4.253 5.622L18.244 2.25zm-1.161 17.52h1.833L7.084 4.126H5.117L17.083 19.77z"/>
          </svg>
        </button>
        <button class="share-icon-btn" id="shareFb" aria-label="Facebookでシェア">
          <!-- Facebook logo -->
          <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
          </svg>
        </button>
      </div>
    </div>

    <hr />

    <div class="clock-wrap">
      <span class="clock-label">日本時間</span>
      <div class="clock" id="clock">--:--:--</div>
    </div>
    <hr />


    <a href="/privacy" class="link small">Privacy Policy</a>

    <p class="copyright">© 2026 OFF FRAME</p>

  </div>
</aside>

<style>
  aside {
    flex: 1;
    background: #000;
    display: flex;
    flex-direction: column;
    padding: 1rem;
    justify-content: space-between;
    overflow-y: auto;
  }

  .logo {
    text-decoration: none;
    color: #fff;
    display: flex;
    flex-direction: column;
    gap: 0.4rem;
    opacity: 0.75;
    transition: opacity 0.3s ease;
  }

  .logo:hover { opacity: 1; }

  .logo-main {
    font-family: "Cormorant Garamond", serif;
    font-weight: 300;
    font-size: 1.7rem;
    letter-spacing: 0.3em;
  }

  .logo-sub {
    font-family: "Shippori Mincho", serif;
    font-weight: 400;
    font-size: 1rem;
    letter-spacing: 0.5em;
  }

  .bottom {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  hr {
    border: none;
    border-top: 1px solid #333;
    margin: 0 -1rem;
  }

  .offframe-area {
    display: flex;
    flex-direction: column;
    gap: 0rem;
    margin-bottom: 0.9rem;
  }

  .offframe-copy {
    font-family: "Shippori Mincho", serif;
    font-size: 0.95rem;
    line-height: 2;
    letter-spacing: 0.18em;
    color: #fff;
    opacity: 0.85;
    margin: 0.6rem 0 0;
  }

  .offframe-title {
    font-family: "Shippori Mincho", serif;
    font-size: 0.75rem;
    line-height: 1.8;
    letter-spacing: 0.09em;
    color: #fff;
    opacity: 0.85;
    margin: 0.2rem 0 0.9rem;
  }

  .offframe-mode {
    font-size: 0.62rem;
    opacity: 0.5;
    letter-spacing: 0.15em;
  }

  .about-link {
    font-family: "Cormorant Garamond", serif;
    font-weight: 300;
    font-size: 1.4rem;
    letter-spacing: 0.2em;
    text-decoration: none;
    color: #fff;
    opacity: 0.8;
  }

  .about-link:hover { opacity: 1; }

  /* ============ SNS ============ */
  .sns-section, .share-section {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .section-label {
    font-family: "Cormorant Garamond", serif;
    font-size: 0.65rem;
    letter-spacing: 0.2em;
    color: #fff;
    opacity: 0.4;
  }

  .sns-links {
    display: flex;
    flex-direction: column;
    gap: 0.55rem;
  }

  .sns-btn {
    font-family: "Cormorant Garamond", serif;
    font-weight: 300;
    font-size: 0.95rem;
    letter-spacing: 0.1em;
    text-decoration: none;
    color: #fff;
    opacity: 0.7;
  }

  .sns-btn:hover { opacity: 1; }

  /* ============ シェア ============ */
  .share-section{display: none;}
  
  .share-links {
    display: flex;
    flex-direction: row;
    gap: 0.75rem;
    align-items: center;
  }

  .share-icon-btn {
    background: transparent;
    border: none;
    color: #fff;
    opacity: 0.5;
    cursor: pointer;
    padding: 0;
    width: 16px;
    height: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: opacity 0.2s ease;
  }

  .share-icon-btn:hover { opacity: 1; }

  .share-icon-btn svg {
    width: 100%;
    height: 100%;
  }

  /* ============ 時計 ============ */
  .clock-wrap {
    display: flex;
    flex-direction: column;
    gap: 0rem;
  }

  .clock-label {
    font-family: "Shippori Mincho", serif;
    font-size: 0.7rem;
    letter-spacing: 0.1em;
    color: #fff;
    opacity: 0.5;
  }

  .clock {
    font-family: "Cormorant Garamond", serif;
    font-weight: 300;
    font-size: 1.8rem;
    letter-spacing: 0.1em;
    color: #fff;
    opacity: 0.6;
  }

  .link.small {
    font-family: "Cormorant Garamond", serif;
    font-weight: 300;
    font-size: 0.75rem;
    letter-spacing: 0.1em;
    text-decoration: none;
    color: #fff;
    opacity: 0.5;
  }

  .copyright {
    font-family: "Cormorant Garamond", serif;
    font-weight: 300;
    font-size: 0.7rem;
    letter-spacing: 0.1em;
    color: #fff;
    opacity: 0.4;
    margin: 0;
  }
</style>

<script>
  function initSideNav() {
    const clock = document.getElementById("clock");
    if (clock) {
      setInterval(() => {
        clock.textContent = new Date().toLocaleTimeString("ja-JP", {
          timeZone: "Asia/Tokyo",
          hour12: false
        });
      }, 1000);
    }

    const shareX = document.getElementById("shareX");
    if (shareX) {
      shareX.onclick = () => {
        const url = encodeURIComponent(location.href);
        const text = encodeURIComponent(document.title);
        window.open(`https://twitter.com/intent/tweet?url=${url}&text=${text}`, "_blank");
      };
    }

    const shareFb = document.getElementById("shareFb");
    if (shareFb) {
      shareFb.onclick = () => {
        const url = encodeURIComponent(location.href);
        window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, "_blank");
      };
    }
  }

  document.addEventListener("astro:page-load", initSideNav);
  initSideNav();
</script>